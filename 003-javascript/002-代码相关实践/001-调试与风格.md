# 调试与风格

[toc]

## Sources 资源 面板

- 使用快捷键 F12（Mac：Cmd+Opt+I）打开开发者工具。
- 选择 Sources（资源） 面板。

点击切换按钮可以打开 **文件导航** , **JavaScript 调试** 链两个区域 , 中间的区域就用来显示或修改代码

1. 文件导航（File Navigator） 区域列出了 HTML、JavaScript、CSS 和包括图片在内的其他依附于此页面的文件。Chrome 扩展程序也会显示在这。
2. 代码编辑（Code Editor） 区域展示源码。
3. JavaScript 调试（JavaScript Debugging） 区域是用于调试的，我们很快就会来探索它。

### breakPoints

- 在 `sources` 中可以点击代码某一行的数字 , 设置断点
- 程序运行到断点的地方会暂停运行
  - 可以点击 回复(resume) 或者快捷键`F8`继续运行
  - 点击 `step` 下一步 可以继续执行下一条指令
  - 点击`step over` 跨步 , 类似于下一步,但是会跳过自定义函数内部的执行
  - 点击`step into`步入 , 类似于下一步, 但是会**忽略异步行为**
  - 点击 `step out` 步出 , 会继续执行**当前函数**剩下的所有代码 , 并暂停在当前函数的下一行代码处
  - `=> / ≠>` 启用/禁用所有的断点
  - `(||)` 启用/禁用出现报错后自动暂停运行
- 也可以通过输入 `debugger` 指令实现断点
  - 书写的`debugger`只有在开发者工具被打开的时候有效
  - 正常状态下浏览器会忽略它

### 右侧的调试 JavaScript Debugging

- `watch` 能显示任意表达式的值
  - 点击`+` 增加要监控的表达式 , 执行过程中会自动计算
- `call Stack` 调用栈 , 显示当前签到的调用链
  - 当前函数 , 当前函数参数等信息
- `scope`  显示当前变量
  - `local` 显示当前作用域
  - `global` 显示全局
- `breakpoints` 显示所有已经设置的断点

## 控制台 `Console`

- 可以直接执行执行 , 按下`Enter` 即可执行当前行代码
- 可以通过`shift + entry`可以实现输入多行代码
- 按下回车后会直接在下一横的`<·`符号后面显示执行代码的返回值
  - 如果没有返回值会输出`undefiend`

## 风格

### 语法

- `{` 应该在与语句块在一行 , 例如 `if (表达式){`

```js
if (a > b) {
  // 语句块
}
```

- 例如循环和判断等尽量不要书写单行语句块

```js
if (a>b) { 单行语句块 }
// 不如
if (a > b) 单行语句块 // 不带{}

if (a > b)
  单行语句块 // 尽量不要换行

if (a > b){
  单行语句块 // 尽量使用标准写法 , 即使是单行语句块
}
```

- 一行的程度不要超过 80 - 120 个字符
- 每一行结尾即使计算机会正确的认知所有的行 , 也尽量添加 `;`
- 尽量减少嵌套的层级

### 函数的位置

1. 函数应该在所有调用它的代码的上面
2. 通常先调用函数再书写函数代码

### 注释

1. 尽量让代码即使没有注释也有足够的可读性
2. 尽量使用函数来封装功能性代码 , 让函数的名称作为最好的注释
3. 有一种解释函数功能的专门的语法 JSdoc

```js
/**
 * 返回 x 的 n 次幂
 * 
 * @param {number} x 参与运算的底数
 * @param {number} n 指定的幂值 , 必须是自然数
 * 
 * @return {number} 返回 x 的 n 次幂
*/

function cloth_cover (x , n){
  return x ** n;
}
```
